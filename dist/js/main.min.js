window.addEventListener("DOMContentLoaded",(()=>{chooseButtons[0]&&chooseButtons[0].classList.add("active"),buttonTrans[0]&&buttonTrans[0].classList.add("active"),transports[0]&&(transports[0].style.display="block"),choosePath[0]&&(choosePath[0].style.display="flex"),choosePathDeparture[0]&&(choosePathDeparture[0].style.display="flex"),departureButtons[0]&&departureButtons[0].classList.add("active"),buttonChooseTransports[0]&&buttonChooseTransports[0].classList.add("active"),transportsDeparture[0]&&(transportsDeparture[0].style.display="block")}));const buttonsModal=document.querySelectorAll(".button-modal"),modal=document.querySelector(".modal"),body=document.body,chooseButtons=document.querySelectorAll(".button-choose"),buttonTrans=document.querySelectorAll(".button-transport"),transports=document.querySelectorAll(".form__transports"),choosePath=document.querySelectorAll(".form__choose-path"),choosePathDeparture=document.querySelectorAll(".form__choose-departure"),transportsDeparture=document.querySelectorAll(".form__transports-departure"),sucsessfullBtn=document.querySelector(".modal__sucsessfull-btn");buttonsModal.forEach((e=>{e.addEventListener("click",(()=>{modal.style.display="block",body.classList.add("locked")}))})),document.body.addEventListener("click",(e=>{e.target===modal&&(modal.style.display="none",body.classList.remove("locked"))})),sucsessfullBtn.addEventListener("click",(()=>{modal.style.display="none",body.classList.remove("locked")})),chooseButtons.forEach(((e,t)=>{e.addEventListener("click",(()=>{chooseButtons.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),transports.forEach((e=>e.style.display="none")),transports[t].style.display="block"}))})),buttonTrans.forEach(((e,t)=>{e.addEventListener("click",(()=>{buttonTrans.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),choosePath.forEach((e=>e.style.display="none")),choosePath[t].style.display="flex"}))}));const departureButtons=document.querySelectorAll(".button-departure"),buttonChooseTransports=document.querySelectorAll(".button-transports");departureButtons.forEach(((e,t)=>{e.addEventListener("click",(()=>{departureButtons.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),transportsDeparture.forEach((e=>e.style.display="none")),transportsDeparture[t].style.display="block"}))})),buttonChooseTransports.forEach(((e,t)=>{e.addEventListener("click",(()=>{buttonChooseTransports.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),choosePathDeparture.forEach((e=>e.style.display="none")),choosePathDeparture[t].style.display="flex"}))}));const customSelect=document.querySelectorAll(".form__autocomplete"),btnSelect=document.querySelectorAll(".form__select-btn"),btnSelectImg=document.querySelectorAll(".form__arrow");btnSelect.forEach(((e,t)=>{e.addEventListener("click",(()=>{"block"===customSelect[t].style.display?(btnSelectImg[t].style.transform="rotate(0deg)",customSelect[t].style.display="none"):(btnSelectImg[t].style.transform="rotate(180deg)",customSelect[t].style.display="block")}))}));const items=document.querySelectorAll(".form__list-item");items.forEach((e=>{e.addEventListener("click",(function(){const e=this.closest(".form__select").querySelector(".form__input");e.value=this.textContent,customSelect.forEach((e=>{e.style.display="none"})),btnSelectImg.forEach(((e,t)=>{e.style.transform="rotate(0deg)"})),e.style.border="1px solid #227AFF"}))}));let currentTab=0;function showTab(e){let t=document.getElementsByClassName("form__tab");t[e].style.display="flex",document.getElementById("prevBtn").style.display=0==e?"none":"inline",e==t.length-1?document.getElementById("nextBtn").innerHTML="Завершить регистрацию":document.getElementById("nextBtn").innerHTML="Далее"}function nextPrev(e){let t=document.getElementsByClassName("form__tab");if(1==e&&!validateForm())return!1;t[currentTab].style.display="none",currentTab+=e,currentTab>=t.length&&(document.querySelector(".modal__sucsessfull").style.display="flex",document.querySelector(".form__buttons").style.display="none",document.querySelector(".modal__popup-progress").style.display="none",document.querySelector(".modal__popup-title").style.display="none"),showTab(currentTab)}showTab(currentTab);const errors=document.querySelectorAll(".form__error");function inputHandler(e){let t=e.target;if("INPUT"===t.tagName&&t.parentNode.parentNode.classList.contains("form__tab")){let e=Array.from(t.parentNode.parentNode.querySelectorAll("input")).indexOf(t);""!==t.value.trim()?(t.classList.remove("invalid"),errors[e].textContent="",errors[e].style.display="none"):(t.classList.add("invalid"),errors[e].textContent="Это обязательное поле",errors[e].style.display="block")}}function validateForm(){let e,t,o,s=!0;if(e=document.getElementsByClassName("form__tab"),0===currentTab)for(t=e[currentTab].getElementsByTagName("input"),o=0;o<t.length;o++)""==t[o].value?(t[o].classList.add("invalid"),s=!1,errors[o].textContent="Это обязательное поле",errors[o].style.display="block"):(t[o].classList.remove("invalid"),t[o].style.border="1px solid #227AFF",errors[o].textContent="",errors[o].style.display="none");else if(1===currentTab){if(chooseButtons[0].classList.contains("active"))s=!0;else if(chooseButtons[1].classList.contains("active")){let e=-1;buttonTrans.forEach(((t,o)=>{t.classList.contains("active")&&(e=o)})),-1!==e&&choosePath.forEach(((t,o)=>{if(o===e){let e=t.querySelectorAll("input"),o=t.querySelectorAll(".form__error");e.forEach(((e,t)=>{""===e.value?(e.classList.add("invalid"),s=!1,o[t].textContent="Это обязательное поле",o[t].style.display="block"):(e.classList.remove("invalid"),e.style.border="1px solid #227AFF",o[t].textContent="",o[t].style.display="none"),e.addEventListener("input",inputHandler)}))}}))}}else if(2===currentTab)if(transportsDeparture[0].classList.contains("active"))s=!0;else if(transportsDeparture[1].classList.contains("active")){let e=-1;buttonChooseTransports.forEach(((t,o)=>{t.classList.contains("active")&&(e=o)})),-1!==e&&choosePathDeparture.forEach(((t,o)=>{if(o===e){let e=t.querySelectorAll("input"),o=t.querySelectorAll(".form__error"),r=document.querySelector(".form__real-checkbox"),l=document.querySelector(".form__custom-checkbox");r.checked?(l.style.border="2px solid #227AFF",errors.textContent="",s=!0):(l.style.border="2px solid #F93536",errors.textContent="Необходимо дать ваше согласие",s=!1),r.addEventListener("change",(function(){r.checked?(l.style.border="2px solid #227AFF",errors.textContent=""):(l.style.border="2px solid #F93536",errors.textContent="Необходимо отметить согласие")})),e.forEach(((e,t)=>{""===e.value?(e.classList.add("invalid"),s=!1,o[t].textContent="Это обязательное поле",o[t].style.display="block"):(e.classList.remove("invalid"),e.style.border="1px solid #227AFF",o[t].textContent="",o[t].style.display="none"),e.addEventListener("input",inputHandler)}))}}))}return s&&(document.getElementsByClassName("modal__popup-span")[currentTab].className+=" active"),s}document.querySelectorAll(".form__tab input").forEach((e=>{e.addEventListener("input",inputHandler)}));